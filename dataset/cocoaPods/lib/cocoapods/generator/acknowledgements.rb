module Pod
  module Generator
    class Acknowledgements
      def self.generators
        [Plist, Markdown]
      end

      attr_reader :file_accessors

      def initialize(file_accessors)
        @file_accessors = file_accessors
      end



      def header_title
        'Acknowledgements'
      end

      def header_text
        'This application makes use of the following third party libraries:'
      end

      def footnote_title
        ''
      end

      def footnote_text
        'Generated by CocoaPods - http://cocoapods.org'
      end


      private


      def specs
        file_accessors.map { |accessor| accessor.spec.root }.uniq
      end

      def license_text(spec)
        return nil unless spec.license
        text = spec.license[:text]
        unless text
          if license_file = file_accessor(spec).license
            if license_file.exist?
              text = IO.read(license_file)
            else
              UI.warn "Unable to read the license file `#{license_file }` " \
              "for the spec `#{spec}`"
            end
          end
        end
        text
      end

      protected

      def file_accessor(spec)
        file_accessors.find { |accessor| accessor.spec.root == spec }
      end

    end
  end
end
